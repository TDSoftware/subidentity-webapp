"use strict";(self["webpackChunksubidentity_webapp"]=self["webpackChunksubidentity_webapp"]||[]).push([[163],{89970:function(e,t,s){s.d(t,{Z:function(){return h}});var o=s(28884),i=s(8254);function n(e,t,s,n,d,l){return(0,o.wg)(),(0,o.iD)("span",{class:"spinner",style:(0,i.j5)({"border-width":e.width+"px","border-color":e.color,width:e.size+"px",height:e.size+"px"})},null,4)}var d=s(82482),l=s(66520),c=function(e,t,s,o){var i,n=arguments.length,d=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)d=Reflect.decorate(e,t,s,o);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(d=(n<3?i(d):n>3?i(t,s,d):i(t,s))||d);return n>3&&d&&Object.defineProperty(t,s,d),d};let r=class extends l.w3{constructor(...e){super(...e),(0,d.Z)(this,"color",void 0),(0,d.Z)(this,"size",void 0),(0,d.Z)(this,"width",void 0)}};r=c([(0,l.Ei)({props:{color:{type:String,default:"white"},size:{type:Number,default:14},width:{type:Number,default:2}}})],r);var a=r,u=s(40089);const p=(0,u.Z)(a,[["render",n],["__scopeId","data-v-1372dc47"]]);var h=p},27163:function(e,t,s){s.d(t,{Z:function(){return pe}});var o=s(28884),i=s(92549),n=s(8254);const d={class:"bg-white shadow text-dark p-0 rounded"},l={class:"row align-items-center"},c={class:"col-lg col-12"},r={class:"input-group"},a={class:"input-group-text fw-light text-muted"},u=["disabled"],p={class:"col d-grid mx-auto search-button-col"},h=["disabled"],m=(0,o.Uk)(" SEARCH ");function y(e,t,s,y,b,f){const v=(0,o.up)("ion-icon"),w=(0,o.up)("CustomSelect"),C=(0,o.up)("Spinner"),N=(0,o.up)("CustomNodeModal");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("form",{onSubmit:t[3]||(t[3]=(0,i.iM)(((...t)=>e.submitIdentitySearch&&e.submitIdentitySearch(...t)),["prevent"]))},[(0,o._)("div",d,[(0,o._)("div",l,[(0,o._)("div",c,[(0,o._)("div",r,[(0,o._)("span",a,[(0,o.Wm)(v,{class:"fw-light text-muted",name:"search-outline"})]),(0,o.wy)((0,o._)("input",{disabled:e.busy,autofocus:"","onUpdate:modelValue":t[0]||(t[0]=t=>e.searchTerm=t),class:"form-control text-muted search-input",placeholder:"Search for a Name, E-Mail, Address",type:"text"},null,8,u),[[i.nr,e.searchTerm]])])]),(0,o._)("div",{class:(0,n.C_)(["col-lg-3 col-12 custom-select-container",{disabled:e.busy}])},[(0,o.Wm)(w,{options:e.chainOptions,class:"select","selected-key":e.selectedChainKey,"onUpdate:selected-key":t[1]||(t[1]=t=>e.selectedChainKey=t)},null,8,["options","selected-key"])],2),(0,o._)("div",{class:(0,n.C_)(["col-lg col-12 edit-node-button-col",{disabled:e.busy}]),onClick:t[2]||(t[2]=(...t)=>e.onEditCustomNodeClick&&e.onEditCustomNodeClick(...t))},[(0,o.Wm)(v,{class:"fw-normal",name:e.customNode?"create-outline":"add-circle-outline"},null,8,["name"]),(0,o._)("span",null,(0,n.zw)(e.customNode?"Edit":"")+" Custom Node ",1)],2),(0,o._)("div",p,[(0,o._)("button",{ref:"searchButton",disabled:e.submitButtonDisabled,class:"btn btn-primary fw-normal text-white",type:"submit"},[e.busy?((0,o.wg)(),(0,o.j4)(C,{key:0})):(0,o.kq)("",!0),m],8,h)])])])],32),(0,o.Wm)(N,{open:e.editCustomNodeModalOpen,"onUpdate:open":t[4]||(t[4]=t=>e.editCustomNodeModalOpen=t),"custom-node":e.customNode,onSave:e.onCustomNodeSaved},null,8,["open","custom-node","onSave"])],64)}var b=s(82482),f=s(66520);const v=["tabindex"],w={class:"icon fw-light text-muted"},C=["onClick"];function N(e,t,s,i,d,l){const c=(0,o.up)("ion-icon");return(0,o.wg)(),(0,o.iD)("div",{tabindex:e.tabindex,class:"custom-select",onBlur:t[1]||(t[1]=t=>e.open=!1)},[(0,o._)("span",w,[(0,o.Wm)(c,{class:"fw-light text-muted",name:"git-network-outline"})]),(0,o._)("div",{class:(0,n.C_)([{open:e.open},"selected fw-light text-muted"]),onClick:t[0]||(t[0]=(...t)=>e.onSelectClick&&e.onSelectClick(...t))},(0,n.zw)(e.selected?.displayValue),3),(0,o._)("div",{class:(0,n.C_)([{selectHide:!e.open},"items"])},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.options,((t,s)=>((0,o.wg)(),(0,o.iD)("div",{key:s,ref_for:!0,ref:"select-option",class:"select-option fw-light text-body",onClick:s=>e.setOption(t)},(0,n.zw)(t.displayValue),9,C)))),128))],2)],40,v)}var g=function(e,t,s,o){var i,n=arguments.length,d=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)d=Reflect.decorate(e,t,s,o);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(d=(n<3?i(d):n>3?i(t,s,d):i(t,s))||d);return n>3&&d&&Object.defineProperty(t,s,d),d};let k=class extends f.w3{constructor(...e){super(...e),(0,b.Z)(this,"options",void 0),(0,b.Z)(this,"selectedKey",void 0),(0,b.Z)(this,"selected",{key:"",displayValue:""}),(0,b.Z)(this,"open",!1)}created(){this.selected=this.options.find((({key:e})=>e===this.selectedKey))??this.options[0],this.$emit("update:selectedKey",this.selected?.key)}onSelectClick(){this.open=!this.open}setOption(e){this.selected=e,this.open=!1,this.$emit("update:selectedKey",this.selected?.key)}};k=g([(0,f.Ei)({name:"CustomSelect",props:{options:{type:Array,required:!0},tabindex:{type:Number,required:!1,default:0},selectedKey:{type:String,required:!0}},watch:{selectedKey(){this.selected=this.options.find((({key:e})=>e===this.selectedKey))??this.options[0]}}})],k);var _=k,x=s(40089);const S=(0,x.Z)(_,[["render",N],["__scopeId","data-v-52f7d568"]]);var O=S,Z=s(67627),j=s(89970),D=s(24044),E=s(53458);const K=e=>((0,o.dD)("data-v-897b2fbc"),e=e(),(0,o.Cn)(),e),P={class:"row"},A={class:"mb-3 col"},R=K((()=>(0,o._)("label",{class:"form-label"},"Address",-1))),I={key:0,class:"alert alert-danger mt-2"},T={key:0,class:"mb-3 col"},q=K((()=>(0,o._)("label",{class:"form-label"},"Name",-1))),M={class:"buttons"},z=["disabled"],U=(0,o.Uk)(" SAVE NODE "),V={class:""},$=["disabled"];function W(e,t,s,d,l,c){const r=(0,o.up)("Spinner"),a=(0,o.up)("Modal");return(0,o.wg)(),(0,o.j4)(a,{open:e.open,"onUpdate:open":t[5]||(t[5]=t=>e.$emit("update:open",t))},{title:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.customNode?"Edit":"Add")+" your custom node ",1)])),body:(0,o.w5)((()=>[(0,o._)("div",P,[(0,o._)("div",A,[R,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.newCustomNodeAddress=t),type:"text",class:"form-control",placeholder:"e.g.: ws://127.0.0.1:9944",onKeypress:t[1]||(t[1]=(0,i.D2)(((...t)=>e.saveCustomNode&&e.saveCustomNode(...t)),["enter"]))},null,544),[[i.nr,e.newCustomNodeAddress]]),e.error?((0,o.wg)(),(0,o.iD)("div",I,(0,n.zw)(e.error),1)):(0,o.kq)("",!0)]),e.customNode&&e.newCustomNodeAddress===e.customNode.address?((0,o.wg)(),(0,o.iD)("div",T,[q,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.customNode.name=t),type:"text",class:"form-control",placeholder:"Name...",disabled:"",readonly:""},null,512),[[i.nr,e.customNode.name]])])):(0,o.kq)("",!0)]),(0,o._)("div",M,[(0,o._)("div",null,[(0,o._)("button",{class:"btn btn-primary text-white d-block",disabled:!e.newCustomNodeAddress||e.busy,onClick:t[3]||(t[3]=(...t)=>e.saveCustomNode&&e.saveCustomNode(...t))},[e.busy?((0,o.wg)(),(0,o.j4)(r,{key:0})):(0,o.kq)("",!0),U],8,z)]),(0,o._)("div",V,[(0,o._)("button",{class:"btn btn-dark d-block",disabled:e.busy,onClick:t[4]||(t[4]=t=>e.$emit("update:open",!1))}," CANCEL ",8,$)])])])),_:1},8,["open"])}const B={key:0,class:"modal"},H={class:"modal-inner"},L={class:"header row mb-3"},F={class:"col"},Y={class:"body"};function J(e,t,s,i,n,d){const l=(0,o.up)("ion-icon");return e.open?((0,o.wg)(),(0,o.iD)("div",B,[(0,o._)("div",H,[(0,o._)("div",L,[(0,o._)("h3",F,[(0,o.WI)(e.$slots,"title",{},void 0,!0)]),(0,o._)("button",{class:"col btn btn-link text-muted",style:{flex:"0 0 50px"},onClick:t[0]||(t[0]=(...t)=>e.close&&e.close(...t))},[(0,o.Wm)(l,{name:"close-circle-outline",size:"large"})])]),(0,o._)("div",Y,[(0,o.WI)(e.$slots,"body",{},void 0,!0)])])])):(0,o.kq)("",!0)}var X=function(e,t,s,o){var i,n=arguments.length,d=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)d=Reflect.decorate(e,t,s,o);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(d=(n<3?i(d):n>3?i(t,s,d):i(t,s))||d);return n>3&&d&&Object.defineProperty(t,s,d),d};let G=class extends f.w3{close(){this.$emit("update:open",!1)}};G=X([(0,f.Ei)({name:"Modal",props:{open:{type:Boolean,required:!0}}})],G);var Q=G;const ee=(0,x.Z)(Q,[["render",J],["__scopeId","data-v-ee842646"]]);var te=ee,se=s(12798),oe=function(e,t,s,o){var i,n=arguments.length,d=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)d=Reflect.decorate(e,t,s,o);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(d=(n<3?i(d):n>3?i(t,s,d):i(t,s))||d);return n>3&&d&&Object.defineProperty(t,s,d),d};let ie=class extends f.w3{constructor(...e){super(...e),(0,b.Z)(this,"customNode",void 0),(0,b.Z)(this,"open",void 0),(0,b.Z)(this,"newCustomNodeAddress",""),(0,b.Z)(this,"busy",!1),(0,b.Z)(this,"error","")}created(){this.newCustomNodeAddress=this.customNode?.address??""}async saveCustomNode(){this.busy=!0;try{const e=await(0,se.qz)(this.newCustomNodeAddress),t={key:"customNode",name:e,address:this.newCustomNodeAddress,modifiedAt:Date.now()};(0,E.t8)(E.KJ.CustomNode,t),this.$emit("save",t)}catch(e){this.error="Could not reach your entered address. Please check again and enter a valid address."}this.busy=!1}};ie=oe([(0,f.Ei)({components:{Modal:te,Spinner:j.Z},props:{open:{type:Boolean,required:!0},customNode:{type:Object,required:!0}},watch:{newCustomNodeAddress(){this.error=""}}})],ie);var ne=ie;const de=(0,x.Z)(ne,[["render",W],["__scopeId","data-v-897b2fbc"]]);var le=de,ce=function(e,t,s,o){var i,n=arguments.length,d=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)d=Reflect.decorate(e,t,s,o);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(d=(n<3?i(d):n>3?i(t,s,d):i(t,s))||d);return n>3&&d&&Object.defineProperty(t,s,d),d};let re=class extends f.w3{constructor(...e){super(...e),(0,b.Z)(this,"store",(0,Z.oR)()),(0,b.Z)(this,"searchTerm",""),(0,b.Z)(this,"selectedChainKey",""),(0,b.Z)(this,"busy",!1),(0,b.Z)(this,"implementsPallet",!1),(0,b.Z)(this,"editCustomNodeModalOpen",!1),(0,b.Z)(this,"customNode",void 0),(0,b.Z)(this,"chainOptions",[])}created(){const e=new URLSearchParams(window.location.search);this.searchTerm=e.get("query")??"",this.selectedChainKey=e.get("chain")??"",this.loadCustomNodeFromStorage(),this.setChainOptions();const t=this.searchTerm&&this.selectedChainKey&&this.store.getters.lastSearchTerm!==this.searchTerm;t&&this.submitIdentitySearch()}loadCustomNodeFromStorage(){this.customNode=(0,E.U2)(E.KJ.CustomNode)}get submitButtonDisabled(){return!this.searchTerm||this.busy||!this.implementsPallet}setChainOptions(){const e=D.p5.map((e=>({key:e.key,displayValue:"In "+e.name})));this.customNode&&e.push({key:this.customNode.key,displayValue:this.customNode.name}),this.chainOptions=e}async checkIdentityPalletExists(){this.busy=!0,this.implementsPallet=await this.store.dispatch("IDENTITY_PALLET_EXISTS",this.selectedChainKey),this.implementsPallet||alert("Sorry, the selected node is not available or does not implement the identity pallet"),this.busy=!1}submitIdentitySearch(){this.busy=!0;const e={searchTerm:this.searchTerm,selectedChainKey:this.selectedChainKey,results:[],timestamp:Date.now()};this.$emit("search",e),this.busy=!1}onEditCustomNodeClick(){this.editCustomNodeModalOpen=!0}onCustomNodeSaved(){this.loadCustomNodeFromStorage(),this.setChainOptions(),this.editCustomNodeModalOpen=!1}};re=ce([(0,f.Ei)({components:{CustomSelect:O,Spinner:j.Z,CustomNodeModal:le},watch:{selectedChainKey(){this.checkIdentityPalletExists()}}})],re);var ae=re;const ue=(0,x.Z)(ae,[["render",y],["__scopeId","data-v-954fe5d6"]]);var pe=ue},82482:function(e,t,s){function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,{Z:function(){return o}})}}]);
//# sourceMappingURL=163.b8c2102c.js.map